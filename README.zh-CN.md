# MayaBot – 自托管 Telegram Bot

[English](README.md) | 中文

---

## 项目概述
MayaBot 是一个以本人兴趣驱动的 **个人及小团体使用的、自托管 Telegram 机器人**，用于统一接入外部 API 与自管理的基础设施服务。

该 Bot 运行于基于 Linux 的 NAS 上，并通过 Docker 部署。其设计目标是作为一个 **长期运行、可持续扩展的个人基础设施项目**，同时也是本人进行项目设计与系统实践的试金石，而非单一用途的聊天机器人。

MayaBot 的主要交互语言为 **中文**。命令设计、提示词构造以及生成内容均以中文语境和中文互联网文化为核心。

---

## 心路历程 & 博客分享（持续更新）

- [修复 NAS 网络问题小记：当 ping 正常但 curl 失败时](https://vanquisher.world/2026/01/09/When-ping-works-but-curl-fails/)

---

## 功能特性
- 模块化的命令与处理器结构，便于持续且快速地添加新功能  
- 通过独立的 Adapter 模块集成第三方 API  
- 以中文为主的输出与内容生成逻辑  
- 面向长期运行场景设计的自托管部署方式  

### 代表性功能
- **/dongzhuo**  
  集成火山引擎的图像生成 API。  
  该功能需要将用户提供的图片上传至火山引擎 TOS 对象存储，并构建图像处理 pipeline，  
  从而根据用户输入生成预定义模板的 “350234” 董卓 / 吕布 meme。  

  该功能主要用于实验 **多阶段图像处理流程** 以及 **meme 模板化生成机制**。

- **/fortune**  
  为用户生成当日运势，并支持在结果低于设定阈值时进行有限次数的重新抽取。

---

## 系统架构
MayaBot 采用模块化、解耦的设计思路：

- **核心层**
  - Telegram 消息接收与分发  
  - 命令解析与路由  
  - 统一的错误处理与日志机制  

- **功能模块**
  - 独立的命令处理逻辑  
  - AI 图像生成模块（火山引擎 / 豆包）  
  - 预留用于后续功能扩展的模块接口  

- **配置管理**
  - 所有配置项与密钥均通过环境变量注入  
  - 代码仓库中不包含任何敏感信息  

该架构允许在不修改核心逻辑的情况下持续扩展新功能。

---

## 部署方式
MayaBot 使用 Docker 进行容器化部署，并运行于 Linux NAS 环境。

部署设计重点包括：
- 可复现的运行环境  
- 服务之间的隔离  
- 对家庭网络及真实网络环境不稳定性的适应能力  

Bot 被设计为长期运行，并能够在网络或外部 API 出现异常时保持基本可用性。

---

## 语言与使用说明
- MayaBot 主要面向 **中文用户**
- 提示词、回复内容及梗图逻辑均基于中文语言习惯与语境
- 项目优先考虑实用性，而非多语言的完整覆盖

---

## 项目定位
该项目明确定位为：
- **个人基础设施工具**
- 用于学习与实践以下方向：
  - 自托管服务的部署与运维
  - Docker 化应用管理
  - 第三方 API 集成
  - 长期运行系统的维护与调试

该项目并非面向公众的 SaaS 产品，也不以通用聊天机器人为目标。

---

## 后续计划
- 添加歌曲推荐算法相关功能，提供每日歌曲推送  
- 引入多语言支持，使英语母语用户也可使用部分功能  
- 在小范围内将个人 NAS 存储作为文件云服务提供给他人使用  
- 根据个人兴趣持续优化用户体验，并随机添加新的功能模块
